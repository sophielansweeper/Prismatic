---
id: Expensify
title: Expensify Component
sidebar_label: Expensify
description: Expensify provides an industry leading expense management system. Use the Expensify component to programmatically download expense report data for analysis or insertion into your accounting package, provision accounts for new hires, and much more.. Learn more about using Prismatic's Expensify component.
---

[//]: # "DO NOT EDIT THIS FILE MANUALLY."
[//]: # "This file was auto generated using scripts in docusaurus/scripts/components/"

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

<div className="avatar">
  <div className="avatar__photo-link avatar__photo avatar__photo--lg">
    <img src="/docs/img/components/icons/60/ZXhwZW5zaWZ5.png" alt="Expensify" />
  </div>
  <div className="avatar__intro">
    <h4 className="avatar__name">
      Expensify provides an industry leading expense management system. Use the
      Expensify component to programmatically download expense report data for
      analysis or insertion into your accounting package, provision accounts for
      new hires, and much more.
    </h4>
    <small className="avatar__subtitle">
      Component key: <b>Expensify</b>
    </small>
  </div>
</div>

## Description

[Expensify](https://www.expensify.com) provides an industry leading expense management system.

Use the Expensify component to programmatically download expense report data for analysis or insertion into your accounting package, provision accounts for new hires, and much more.

API Reference:
[Expensify API Reference](https://integrations.expensify.com/Integration-Server/doc/)

## Connections

### Basic Connection

Create a new authentication connection. Refer to the following [guide](https://integrations.expensify.com/Integration-Server/doc/#authentication) for more information.

1. Navigate to https://www.expensify.com/tools/integrations/ and select the option that creates a new set of credentials
2. A pair of credentials: `partnerUserID` and `partnerUserSecret` will be generated and shown on the page.
   1. Make sure to store the `partnerUserID` and `partnerUserSecret` pair you're given in a secure location, as you won't be shown them again.
3. Enter the `partnerUserID` and `partnerUserSecret` into the connection configuration of your Prismatic integration

<ComponentInputsTable
  inputs={[
    {
      placeholder: "partnerUserID",
      required: true,
      shown: true,
      comments:
        "Provide a string value for the partnerUserID of your Expensify account.",
      example: "_REPLACE_",
      key: "partnerUserID",
      type: "string",
      default: "",
      label: "Partner User ID",
    },
    {
      placeholder: "partnerUserSecret",
      required: true,
      shown: true,
      comments:
        "Provide a string value for the partnerUserSecret of your Expensify account.",
      example: "_REPLACE_",
      key: "partnerUserSecret",
      type: "string",
      default: "",
      label: "Partner User Secret",
    },
  ]}
/>

## Data Sources

<div id="listcards" />

### List Cards

Returns all Cards. | <small><b>key: listCards</b></small> | <small><b>type: picklist</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments:
        "Specifies to the job that it has to list the Cards of a domain.",
      key: "domain",
      type: "string",
      default: "domain",
      label: "Domain",
    },
    {
      required: true,
      comments:
        "Specifies to the job that it has to list the Cards of a domain.",
      key: "type",
      type: "string",
      default: "domainCardList",
      label: "Type",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="listpolicies" />

### List Policies

Returns all Policies. | <small><b>key: listPolicies</b></small> | <small><b>type: picklist</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments:
        "Specifies to the job that it has to get a policy summary list.",
      key: "type",
      type: "string",
      default: "policyList",
      label: "Type",
    },
  ]}
/>

<hr className="componentActionSeparator" />

## Actions

<div id="createexpense" />

### Create Expense

Allows you to create expenses in a user’s account. | <small><b>key: createExpense</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The report will be created in that account.",
      key: "employeeEmail",
      type: "string",
      default: "",
      label: "Employee Email",
    },
    {
      language: "json",
      comments: "The transactions to add to the report.",
      required: true,
      key: "transactionList",
      type: "code",
      default:
        '[\n  {\n    "created": "2016-01-01",\n    "currency": "USD",\n    "merchant": "Name of merchant 1",\n    "amount": 1234\n  },\n  {\n    "created": "2016-01-21",\n    "currency": "EUR",\n    "merchant": "Name of merchant 2",\n    "amount": 2211,\n    "policyID": "E40D9B8DF456E233",\n    "tax": {\n      "rateID": "id_TAX_OPTION_16"\n    }\n  },\n  {\n    "created": "2016-01-31",\n    "currency": "CAD",\n    "merchant": "Name of merchant 3",\n    "amount": 2211,\n    "reportID": "R006AseGxMka",\n    "tax": {\n      "rateID": "id_TAX_OPTION_16",\n      "amount": 600\n    }\n  }\n]',
      label: "Transaction List",
    },
    {
      required: true,
      comments: "Specifies to the job that it has to create expenses.",
      key: "type",
      type: "string",
      default: "expenses",
      label: "Type",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "responseCode": 200,
    "transactionList": [
      {
        "amount": 1234,
        "merchant": "Name Of Merchant 1",
        "created": "2016-01-01",
        "transactionID": "6720309558248016",
        "currency": "USD"
      },
      {
        "amount": 2211,
        "merchant": "Name Of Merchant 2",
        "created": "2016-01-31",
        "transactionID": "6720309558248017",
        "currency": "CAD"
      }
    ]
  }
}
```

<hr className="componentActionSeparator" />

<div id="createexpenserule" />

### Create Expense Rule

Create expense rules for a given employee on a given policy. | <small><b>key: createExpenseRule</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      comments: "The actions to perform on the expense rule.",
      required: true,
      key: "actions",
      type: "code",
      default: '{\n  "tag": "Tag Name",\n  "defaultBillable": true\n}',
      label: "Actions",
    },
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The report will be created in that account.",
      key: "employeeEmail",
      type: "string",
      default: "",
      label: "Employee Email",
    },
    {
      required: true,
      comments: "The report will be created in that policy.",
      example: "Any valid Expensify policy ID, owned or shared by the user",
      key: "policyId",
      type: "string",
      default: "",
      label: "Policy ID",
    },
    {
      required: true,
      comments: "Specifies to the job that it has to create an expense rule.",
      key: "type",
      type: "string",
      default: "expenseRules",
      label: "Type",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="createpolicy" />

### Create Policy

Creates a policy. | <small><b>key: createPolicy</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: false,
      comments:
        "Specifies the plan of the policy. If not specified, the new policy will be created under the team plan.",
      model: [
        {
          label: "team",
          value: "team",
        },
        {
          label: "corporate",
          value: "corporate",
        },
      ],
      key: "plan",
      type: "string",
      default: "",
      label: "Plan",
    },
    {
      required: true,
      comments: "The name of the policy to create.",
      key: "policyName",
      type: "string",
      default: "",
      label: "Policy Name",
    },
    {
      required: true,
      comments: "Specifies to the job that it has to create a policy.",
      key: "type",
      type: "string",
      default: "policy",
      label: "Type",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "responseCode": 200,
    "policyID": "0123456789ABCDEF",
    "policyName": "My New Policy"
  }
}
```

<hr className="componentActionSeparator" />

<div id="createreport" />

### Create Report

Creates a report, with transactions, in a user’s account. | <small><b>key: createReport</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The report will be created in that account.",
      key: "employeeEmail",
      type: "string",
      default: "",
      label: "Employee Email",
    },
    {
      language: "json",
      comments: "The expenses to add to the report.",
      required: true,
      key: "expenses",
      type: "code",
      default:
        '[\n  {\n    "date": "yyyy-mm-dd",\n    "currency": "USD",\n    "merchant": "Name of merchant",\n    "amount": 1234\n  },\n  {\n    "date": "yyyy-mm-dd",\n    "currency": "CAD",\n    "merchant": "Name of merchant",\n    "amount": 2211\n  }\n]',
      label: "Expenses",
    },
    {
      required: true,
      comments: "The report will be created in that policy.",
      example: "Any valid Expensify policy ID, owned or shared by the user",
      key: "policyId",
      type: "string",
      default: "",
      label: "Policy ID",
    },
    {
      language: "json",
      comments: "The report to create.",
      required: true,
      key: "report",
      type: "code",
      default:
        '{\n  "title": "Name of the report",\n  "fields": {\n    "reason_of_trip": "Business trip",\n    "employees": "3"\n  }\n}',
      label: "Report",
    },
    {
      required: true,
      comments: "Specifies to the job that it has to create a report.",
      key: "type",
      type: "string",
      default: "report",
      label: "Type",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "responseCode": 200,
    "reportName": "Name of the report",
    "reportID": "R006AseGxMka"
  }
}
```

<hr className="componentActionSeparator" />

<div id="downloadreport" />

### Download Report

This job lets you download reports that were generated with the Report Exporter job. | <small><b>key: downloadReport</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The name of a file generated from the exporter job.",
      key: "fileName",
      type: "string",
      default: "",
      label: "File Name",
    },
    {
      required: false,
      comments: "The name of a file generated from the exporter job.",
      model: [
        {
          label: "reconciliation",
          value: "reconciliation",
        },
        {
          label: "integrationServer",
          value: "integrationServer",
        },
      ],
      key: "fileSystem",
      type: "string",
      default: "integrationServer",
      label: "File System",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="exportreport" />

### Export Report

Export expense or report data in a configurable format for analysis or insertion into your accounting package. | <small><b>key: exportReport</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: false,
      placeholder: "yyyy-mm-dd",
      example: "2016-01-01",
      key: "approvedAfter",
      type: "string",
      default: "",
      label: "Approved After",
    },
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: false,
      comments: "The report will be created in that account.",
      key: "employeeEmail",
      type: "string",
      default: "",
      label: "Employee Email",
    },
    {
      required: false,
      comments:
        "Filters out all reports submitted or created before the given date, whichever occurred last (inclusive). yyyy-mm-dd formatted date.",
      key: "endDate",
      type: "string",
      default: "2016-01-01",
      label: "End Date",
    },
    {
      required: false,
      comments:
        "The name of the generated file(s) will start with this value, and a random part will be added to make each filename globally unique. If not specified, the default value export is use.",
      key: "fileBasename",
      type: "string",
      default: "",
      label: "File Basename",
    },
    {
      required: true,
      comments:
        "Specifies the format of the generated report. Note: if the 'pdf' option is chosen, one PDF file will be generated for each report exported.",
      model: [
        {
          label: "csv",
          value: "csv",
        },
        {
          label: "pdf",
          value: "pdf",
        },
        {
          label: "xls",
          value: "xls",
        },
        {
          label: "xlsx",
          value: "xlsx",
        },
        {
          label: "txt",
          value: "txt",
        },
        {
          label: "json",
          value: "json",
        },
        {
          label: "xml",
          value: "xml",
        },
      ],
      key: "fileExtension",
      type: "string",
      default: "json",
      label: "File Extension",
    },
    {
      required: false,
      comments:
        "Specifies whether generated PDFs should include full page receipts. This parameter is used only if fileExtension contains pdf",
      key: "includeFullPageReceiptsPdf",
      type: "boolean",
      default: false,
      label: "Include Full Page Receipts PDF",
    },
    {
      required: false,
      comments: "Maximum number of reports to export.",
      key: "limit",
      type: "string",
      default: "",
      label: "Limit",
    },
    {
      required: false,
      placeholder: "Expensify Export",
      key: "markAsExportedFilter",
      type: "string",
      default: "",
      label: "Mark as Exported Label Filter",
    },
    {
      language: "json",
      comments:
        "You can configure the recipients list of email addresses that should receive a summary email of the changes made by the API.",
      required: false,
      key: "onFinish",
      type: "code",
      default:
        '[\n  {\n    "actionName": "markAsExported",\n    "label": "Expensify Export"\n  },\n  {\n    "actionName": "email",\n    "recipients": "manager@domain.com,finances@domain.com",\n    "message": "Report is ready."\n  }\n]',
      label: "On Finish",
    },
    {
      required: false,
      comments: "The IDs of the policies to get information for.",
      key: "policyIDList",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Policy ID List",
    },
    {
      required: false,
      comments: "The IDs of the reports to get information for.",
      key: "reportIdList",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Report ID List",
    },
    {
      required: false,
      comments:
        "Filters out all reports submitted or created before the given date, whichever occurred last (inclusive). yyyy-mm-dd formatted date.",
      key: "startDate",
      type: "string",
      default: "2016-01-01",
      label: "Start Date",
    },
    {
      required: false,
      comments:
        "The status to change the reports to. At the moment, only Reimbursed is supported. Only reports in the Approved status can be updated to Reimbursed. All other reports will be ignored.",
      key: "status",
      type: "string",
      default: "REIMBURSED",
      label: "Report State",
    },
    {
      language: "json",
      required: false,
      comments:
        "The template parameter is used to format the Expensify data as you wish. It is based on the Freemarker language's syntax.",
      key: "templateName",
      type: "code",
      default:
        "\n    <#if addHeader == true>\n        Merchant,Original Amount,Category,Report number,Expense number<#lt>\n    </#if>\n    <#assign reportNumber = 1>\n    <#assign expenseNumber = 1>\n    <#list reports as report>\n        <#list report.transactionList as expense>\n            ${expense.merchant},<#t>\n            <#-- note: expense.amount prints the original amount only -->\n            ${expense.amount},<#t>\n            ${expense.category},<#t>\n            ${reportNumber},<#t>\n            ${expenseNumber}<#lt>\n            <#assign expenseNumber = expenseNumber + 1>\n        </#list>\n        <#assign reportNumber = reportNumber + 1>\n    </#list>",
      label: "Template",
    },
    {
      required: false,
      comments:
        "If set to true, actions defined in onFinish will not be executed.",
      key: "test",
      type: "boolean",
      default: false,
      label: "Test",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": "exporteba3c95b-f302-4d74-a41a-6127c9088551-5650745444954548.pdf,exporteba3c95b-f302-4d74-a41a-6127c9088551-2050520975381833.pdf"
}
```

<hr className="componentActionSeparator" />

<div id="getpolicy" />

### Get Policy

Gets specific information about listed policies. | <small><b>key: getPolicy</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "Specifies the fields of the policy to gather information for.",
      model: [
        {
          label: "categories",
          value: "categories",
        },
        {
          label: "reportFields",
          value: "reportFields",
        },
        {
          label: "tags",
          value: "tags",
        },
        {
          label: "tax",
          value: "tax",
        },
        {
          label: "employees",
          value: "employees",
        },
      ],
      key: "fields",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Fields",
    },
    {
      required: true,
      comments: "The IDs of the policies to get information for.",
      key: "policyIDList",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Policy ID List",
    },
    {
      required: true,
      comments:
        "Specifies to the job that it has to get information specific to policies.",
      key: "type",
      type: "string",
      default: "policy",
      label: "Type",
    },
    {
      required: false,
      comments:
        "Specifies the user to gather the policy list for. You must have been granted third-party access by that user/company domain beforehand.",
      key: "userEmail",
      type: "string",
      default: "",
      label: "User Email",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "responseCode": 200,
    "policyInfo": {
      "4C6722D4BD2BD941": {
        "reportFields": [
          {
            "values": [],
            "name": "title",
            "type": "formula"
          },
          {
            "values": [
              "Class 1",
              "Class 2",
              "Class 2:Sub class 2"
            ],
            "name": "Classes",
            "type": "dropdown"
          },
          {
            "values": [
              "Donatello",
              "Leonardo",
              "Michelangelo",
              "Rafael"
            ],
            "name": "Customers/Jobs",
            "type": "dropdown"
          }
        ],
        "categories": [
          {
            "name": "Entertainment",
            "enabled": true
          },
          {
            "name": "Transportation",
            "enabled": true
          },
          {
            "name": "Phone",
            "enabled": true
          },
          {
            "name": "Fuel/Mileage",
            "enabled": true
          },
          {
            "name": "Lodging",
            "enabled": true
          },
          {
            "name": "Meals",
            "enabled": true
          },
          {
            "name": "Other",
            "enabled": false
          }
        ],
        "tags": [
          {
            "glCode": "",
            "name": "Enterprise",
            "enabled": true
          },
          {
            "glCode": "",
            "name": "Enterprise:Jean-Luc Picard",
            "enabled": true
          },
          {
            "glCode": "",
            "name": "Enterprise:Lt. Commander Data",
            "enabled": true
          },
          {
            "glCode": "",
            "name": "Enterprise:William Riker",
            "enabled": true
          }
        ],
        "tax": {
          "default": "4",
          "rates": [
            {
              "rate": 0,
              "name": "EC Goods Zero-rated",
              "rateID": "5"
            },
            {
              "rate": 0,
              "name": "EC Services Standard",
              "rateID": "4"
            },
            {
              "rate": 20,
              "name": "Standard",
              "rateID": "2"
            },
            {
              "rate": 5,
              "name": "Reduced",
              "rateID": "9"
            }
          ],
          "name": "Tax"
        }
      },
      "3F329EA1C3809E6C": {
        "categories": [
          {
            "name": "Phone Costs",
            "areCommentsRequired": false,
            "enabled": false
          },
          {
            "name": "Legal",
            "areCommentsRequired": false,
            "enabled": false
          },
          {
            "name": "Agency Expense",
            "areCommentsRequired": false,
            "enabled": false
          }
        ],
        "reportFields": [
          {
            "values": [],
            "name": "title",
            "type": "formula"
          }
        ],
        "tags": [
          {
            "name": "Tags",
            "tags": []
          }
        ],
        "tax": {},
        "employees": [
          {
            "email": "admin@domain.com",
            "role": "admin",
            "submitsTo": "user@domain.com"
          },
          {
            "email": "user@domain.com",
            "role": "user",
            "submitsTo": "admin@domain.com",
            "employeeID": "Emp1",
            "customField2": "custom information"
          }
        ]
      }
    }
  }
}
```

<hr className="componentActionSeparator" />

<div id="listcards" />

### List Cards

Gets the list of credit cards that are assigned at the domain level. | <small><b>key: listCards</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The name of the domain to get the cards for.",
      key: "domain",
      type: "string",
      default: "",
      label: "Domain",
    },
    {
      required: true,
      comments:
        "Specifies to the job that it has to list the cards of a domain.",
      key: "type",
      type: "string",
      default: "domainCardList",
      label: "Type",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="listpolicies" />

### List Policies

Gets a list of policies with some relevant information about them. | <small><b>key: listPolicies</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: false,
      comments:
        "Whether or not to only get policies for which the user is an admin for.",
      key: "adminOnly",
      type: "boolean",
      default: "false",
      label: "Admin Only",
    },
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments:
        "Specifies to the job that it has to get a policy summary list.",
      key: "type",
      type: "string",
      default: "policyList",
      label: "Type",
    },
    {
      required: false,
      comments:
        "Specifies the user to gather the policy list for. You must have been granted third-party access by that user/company domain beforehand.",
      key: "userEmail",
      type: "string",
      default: "",
      label: "User Email",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "policyList": [
      {
        "outputCurrency": "USD",
        "owner": "admin@acmecorp.com",
        "role": "user",
        "name": "Acme Corp USA Policy",
        "id": "DEADBEEF12345678",
        "type": "corporate"
      },
      {
        "outputCurrency": "EUR",
        "owner": "admin@acmecorp.com",
        "role": "auditor",
        "name": "Acme Corp France Policy",
        "id": "BA5EBA1187654321",
        "type": "corporate"
      },
      {
        "outputCurrency": "USD",
        "owner": "hr@acmecorp.com",
        "role": "admin",
        "name": "ACME Corp Candidate Policy",
        "id": "F005BA11000099999",
        "type": "corporate"
      }
    ],
    "responseCode": 200
  }
}
```

<hr className="componentActionSeparator" />

<div id="rawrequest" />

### Raw Request

Send a raw HTTP request to the Expensify API | <small><b>key: rawRequest</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      placeholder: "Data to send",
      required: false,
      comments: "The HTTP body payload to send to the URL.",
      example: '{"exampleKey": "Example Data"}',
      key: "data",
      type: "string",
      default: "",
      label: "Data",
    },
    {
      required: false,
      comments: "Enabling this flag will log out the current request.",
      key: "debugRequest",
      type: "boolean",
      default: "false",
      label: "Debug Request",
    },
    {
      placeholder: "Data to send",
      required: false,
      comments: "File Data to be sent as a multipart form upload.",
      example: '[{key: "example.txt", value: "My File Contents"}]',
      key: "fileData",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "File Data",
    },
    {
      placeholder: "The file name to apply to a file",
      required: false,
      comments:
        "File names to apply to the file data inputs. Keys must match the file data keys above.",
      key: "fileDataFileNames",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "File Data File Names",
    },
    {
      placeholder: "Data to send",
      required: false,
      comments: "The Form Data to be sent as a multipart form upload.",
      example: '[{"key": "Example Key", "value": new Buffer("Hello World")}]',
      key: "formData",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Form Data",
    },
    {
      placeholder: "Header",
      required: false,
      comments: "A list of headers to send with the request.",
      example: "User-Agent: curl/7.64.1",
      key: "headers",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Header",
    },
    {
      placeholder: "Max Retries",
      required: false,
      comments: "The maximum number of retries to attempt.",
      key: "maxRetries",
      type: "string",
      default: "0",
      label: "Max Retry Count",
    },
    {
      required: true,
      model: [
        {
          label: "DELETE",
          value: "DELETE",
        },
        {
          label: "GET",
          value: "GET",
        },
        {
          label: "HEAD",
          value: "HEAD",
        },
        {
          label: "LINK",
          value: "LINK",
        },
        {
          label: "OPTIONS",
          value: "OPTIONS",
        },
        {
          label: "PATCH",
          value: "PATCH",
        },
        {
          label: "POST",
          value: "POST",
        },
        {
          label: "PURGE",
          value: "PURGE",
        },
        {
          label: "PUT",
          value: "PUT",
        },
        {
          label: "UNLINK",
          value: "UNLINK",
        },
      ],
      comments: "The HTTP method to use.",
      key: "method",
      type: "string",
      default: "",
      label: "Method",
    },
    {
      placeholder: "Query Parameter",
      required: false,
      comments:
        "A list of query parameters to send with the request. This is the portion at the end of the URL similar to ?key1=value1&key2=value2.",
      key: "queryParams",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Query Parameter",
    },
    {
      placeholder: "Response Type",
      required: true,
      comments:
        "The type of data you expect in the response. You can request json, text, or binary data.",
      model: [
        {
          label: "arraybuffer",
          value: "arraybuffer",
        },
        {
          label: "document",
          value: "document",
        },
        {
          label: "json",
          value: "json",
        },
        {
          label: "text",
          value: "text",
        },
      ],
      key: "responseType",
      type: "string",
      default: "json",
      label: "Response Type",
    },
    {
      required: false,
      comments:
        "If true, retries on all erroneous responses regardless of type.",
      key: "retryAllErrors",
      type: "boolean",
      default: "false",
      label: "Retry On All Errors",
    },
    {
      placeholder: "Retry Delay",
      required: false,
      comments: "The delay in milliseconds between retries.",
      key: "retryDelayMS",
      type: "string",
      default: "0",
      label: "Retry Delay (ms)",
    },
    {
      required: false,
      comments:
        "The maximum time that a client will await a response to its request",
      example: "2000",
      key: "timeout",
      type: "string",
      default: "",
      label: "Timeout",
    },
    {
      placeholder: "URL to call",
      required: false,
      comments:
        "This input is not required as the Expensify API is a single endpoint.",
      example: "",
      key: "url",
      type: "string",
      default: "",
      label: "URL",
    },
    {
      required: false,
      comments:
        "Specifies whether to use a pre-defined exponential backoff strategy for retries.",
      key: "useExponentialBackoff",
      type: "boolean",
      default: "false",
      label: "Use Exponential Backoff",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="updateemployee" />

### Update Employee

Add, update or remove policy members | <small><b>key: updateEmployee</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: false,
      comments:
        "If set to true, employees will not actually be provisioned or updated. Use this for development.",
      key: "dryRun",
      type: "boolean",
      default: "false",
      label: "Dry Run",
    },
    {
      language: "json",
      comments:
        "Replace or update the existing employees of the policy with the ones provided. If the employee does not exist, it will be created.",
      required: false,
      key: "employees",
      type: "code",
      default:
        '[\n  {\n    "employeeEmail": "employee@domain.com",\n    "managerEmail": "manager@domain.com",\n    "policyID": "0123456789ABCDEF",\n    "employeeID": "12345",\n    "firstName": "John",\n    "lastName": "Doe",\n    "customField2": "ABC123",\n    "approvalLimit": 12300,\n    "overLimitApprover": "audit@domain.com",\n    "isTerminated": false,\n    "additionalPolicyIDs": [\n      "ABCDEF0123456789",\n      "456789ABCDEF0123"\n    ]\n  },\n  {\n    "employeeEmail": "manager@domain.com",\n    "managerEmail": "ceo@domain.com",\n    "policyID": "0123456789ABCDEF",\n    "employeeID": "34567",\n    "firstName": "Michael",\n    "lastName": "Scott",\n    "customField1": "ZZZ333",\n    "customField2": "BCD345",\n    "isTerminated": false\n  }\n]',
      label: "Employees",
    },
    {
      language: "json",
      comments:
        "You can configure the recipients list of email addresses that should receive a summary email of the changes made by the API.",
      required: false,
      key: "onFinish",
      type: "code",
      default:
        '[\n  {\n    "actionName": "email",\n    "recipients": "admin1@domain.com,admin2@domain.com"\n  }\n]',
      label: "On Finish",
    },
    {
      required: false,
      comments:
        "Specifies the policy to set as the primary policy for the employee. If not specified, the employee will not have a primary policy.",
      model: [
        {
          label: "none",
          value: "none",
        },
        {
          label: "new_employees",
          value: "new_employees",
        },
        {
          label: "all_employees",
          value: "all_employees",
        },
      ],
      key: "setEmployeePrimaryPolicy",
      type: "string",
      default: "none",
      label: "Set Employee Primary Policy",
    },
    {
      required: false,
      comments:
        "Dictates whether Expensify will automatically invite managers (submitsTo), managers’ managers, and so on to policies where they approve reports, if it is not their primary policy.",
      key: "shouldFixApprovalChains",
      type: "boolean",
      default: "true",
      label: "Admin Only",
    },
    {
      required: true,
      comments: "Specifies to the job that it has to update an employee",
      key: "type",
      type: "string",
      default: "employees",
      label: "Type",
    },
  ]}
/>

The advanced employee updater is designed to allow dynamic and customizable employee provisioning and de-provisioning in Expensify. It will allow you to:

- Provision employees into Expensify policies based on customizable fields, such as employee department, country, job code, etc.
- De-provision employees from Expensify, based on customizable fields, such as termination date
- Assign employees to Expensify domain groups based on customizable fields, such as employee department, country, job code, etc.
- Automatically invite managers to policies they have subordinates on
- Automatically detect employee email address changes, and merge both addresses into the same account
- Import additional information from the employee feed into Expensify, to reuse for custom data export

#### Output Example Payload

```
{
  "data": {
    "responseCode": 200,
    "dry-run": false,
    "updatedEmployeesCount": 3,
    "diff": {
      "diffToAdd": {
        "0123456789ABCDEF": [
          "employee1@domain.com",
          "employee2@domain.com"
        ],
        "ABCDEF0123456789": [
          "employee3@domain.com"
        ]
      },
      "diffToRemove": {
        "B1C7903C636F4A51": [
          "terminatedEmployee@domain.com"
        ]
      }
    },
    "securityGroupEmployeesMap": {
      "407184": [
        "employee1@domain.com",
        "employee2@domain.com"
      ],
      "830936": [
        "employee3@domain.com"
      ]
    },
    "skippedEmployees": [
      {
        "email": "employee6@domain.com",
        "reason": "No policy found for 'Marketing'"
      },
      {
        "email": "employee7@domain.com",
        "reason": "Invalid manager email address 'manager@domain '"
      }
    ]
  }
}
```

<hr className="componentActionSeparator" />

<div id="updateexpenserule" />

### Update Expense Rules

Update a preexisting expense rule for a given employee on a given policy. | <small><b>key: updateExpenseRule</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      comments: "The actions to perform on the expense rule.",
      required: true,
      key: "actions",
      type: "code",
      default: '{\n  "tag": "Tag Name",\n  "defaultBillable": true\n}',
      label: "Actions",
    },
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The report will be created in that account.",
      key: "employeeEmail",
      type: "string",
      default: "",
      label: "Employee Email",
    },
    {
      required: true,
      comments: "The report will be created in that policy.",
      example: "Any valid Expensify policy ID, owned or shared by the user",
      key: "policyId",
      type: "string",
      default: "",
      label: "Policy ID",
    },
    {
      required: true,
      comments: "The rule to update.",
      example: "Any valid Expensify rule ID, owned or shared by the user",
      key: "ruleId",
      type: "string",
      default: "",
      label: "Rule ID",
    },
    {
      required: true,
      comments: "Specifies to the job that it has to create an expense rule.",
      key: "type",
      type: "string",
      default: "expenseRules",
      label: "Type",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="updatepolicy" />

### Update Policy

manage categories, tags and report fields on a policy. | <small><b>key: updatePolicy</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      comments:
        "Replace or update the existing categories of the policy with the ones provided.",
      required: false,
      key: "categories",
      type: "code",
      default:
        '{\n  "action": "merge",\n  "data": [\n    {\n      "name": "Category 1",\n      "enabled": true,\n      "payrollCode": "Payroll Code 1",\n      "glCode": "GL Code 1",\n      "commentHint": "Comment hint 1",\n      "areCommentsRequired": true,\n      "maxExpenseAmount": 2500\n    },\n    {\n      "name": "Category 2",\n      "enabled": false\n    }\n  ]\n}',
      label: "Categories",
    },
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The report will be created in that policy.",
      example: "Any valid Expensify policy ID, owned or shared by the user",
      key: "policyId",
      type: "string",
      default: "",
      label: "Policy ID",
    },
    {
      required: false,
      comments: "The IDs of the policies to get information for.",
      key: "policyIDList",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Policy ID List",
    },
    {
      language: "json",
      comments:
        "Replace or update the existing report fields of the policy with the ones provided.",
      required: false,
      key: "reportFields",
      type: "code",
      default:
        '{\n  "action": "merge",\n  "data": [\n    {\n      "name": "Report field 1",\n      "type": "dropdown",\n      "values": [\n        "value 1",\n        "value 2",\n        "value 3"\n      ]\n    }\n  ]\n}',
      label: "Report Fields",
    },
    {
      language: "json",
      comments:
        "Replace the existing tags of the policy with the ones provided.",
      required: false,
      key: "tags",
      type: "code",
      default:
        '{\n  "data": [\n    {\n      "name": "Tag",\n      "tags": [\n        {\n          "name": "Tag 1",\n          "glCode": "Tag 1 GL Code"\n        },\n        {\n          "name": "Tag 2",\n          "enabled": false\n        }\n      ]\n    }\n  ]\n}',
      label: "Tags",
    },
    {
      required: true,
      comments: "Specifies to the job that it has to update a policy.",
      key: "type",
      type: "string",
      default: "policy",
      label: "Type",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="updatereportstatus" />

### Update Report Status

Update the status of a report. | <small><b>key: updateReportStatus</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connectionInput",
      type: "connection",
      label: "Connection",
    },
    {
      language: "json",
      comments: "The filters to apply to the report list.",
      required: false,
      key: "filters",
      type: "code",
      default:
        '{\n  "type": "reportStatus",\n  "status": "REIMBURSED",\n  "filters": {\n    "reportIDList": "R006AseGxMka,R00bCluvcO4T"\n  }\n}',
      label: "Filters",
    },
    {
      required: true,
      comments:
        "The status to change the reports to. At the moment, only Reimbursed is supported. Only reports in the Approved status can be updated to Reimbursed. All other reports will be ignored.",
      key: "status",
      type: "string",
      default: "REIMBURSED",
      label: "Status",
    },
    {
      required: true,
      comments:
        "Specifies to the job that it has to update the status of a list of reports.",
      key: "type",
      type: "string",
      default: "reportStatus",
      label: "Type",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "responseCode": 200,
    "reportIDs": [
      "R006AseGxMka",
      "R00bCluvcO4T"
    ]
  }
}
```

<hr className="componentActionSeparator" />
